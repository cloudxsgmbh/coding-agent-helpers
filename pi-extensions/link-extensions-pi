#!/bin/bash

SOURCE_DIR="$(dirname "$(realpath "$0")")"
DEST_DIR="$HOME/.pi/agent/extensions/"

# Create destination directory if it doesn't exist
mkdir -p "$DEST_DIR"

# Loop through each directory in the source directory
for dir in "$SOURCE_DIR"/*/; do
    # Check if it is a directory
    if [ -d "$dir" ]; then
        # Get the directory name
        dirname=$(basename "$dir")

        # Create the symbolic link in the destination directory
        ln -s "$dir" "$DEST_DIR/$dirname"
    fi
done

# Loop through each .ts file in the source directory
for file in "$SOURCE_DIR"/*.ts; do
    # Check if it is a file
    if [ -f "$file" ]; then
        # Get the file name
        filename=$(basename "$file")

        # Create the symbolic link in the destination directory
        ln -s "$file" "$DEST_DIR/$filename"
    fi
done